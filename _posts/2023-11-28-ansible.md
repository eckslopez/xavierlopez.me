---
layout: post
title:  "Ansible"
date:   2023-11-28 09:52:00 +0000
categories: ansible
---
## Concepts
# Modules
> Discrete units of code that can be used from the command line or in a playbook task. Ansible executes each module, usually on the remote managed node, and collects return values. In Ansible 2.10 and later, most modules are hosted in collections. Modules support taking arguments.

# Collections
> A distributed format for content that can include playbooks, roles, modules, and plugins. You can install and use collections through a distribution server, such as Ansible Galaxy.

# Plugins
> Pieces of code that augment Ansible's core functionality. Ansible uses a plugin architecture to enable a rich, flexible and expandable feature set. Ansible ships with some plugins. You can write your own. Action plugins act in conjunction with modules to the execute actions required by playbook tasks. 

# Facts
> Variables related to remote systems.

# Magic Variables
> Variables related to Ansible itself.

---

## Command Lines 
# Gather facts from one host:
`ansible <host-name-or-IP> -m ansible.builtin.setup`

# Run an ad-hoc command: 
`ansible sherman -m command -a "getent hosts"`

---

## Managing Parallelism: Tune performance and control execution order.

# Forks
> The default number of forks is conservative. It can be optimized for the environment. The number of forks can be set in ansible.cfg, or by passing it on the command line with `--forks`. It can be set on a per project basis, with ansible.cfg in the project directory. 

# Serial
> Limits the number of hosts affected by a play on a given run. Allows for controlling the size of a rolling update window. Serial is set in the play header. You can set a number, a percentage, or a list of hosts.

---

# Strategy plugins
>  Augment Ansible's core functionality. They're enabled by default. Strategy plugins handle the scheduling of tasks and hosts.
>
> Strategy plugins:
  - linear - runs each task on all hosts before moving on.
  - free - all hosts run through tasks as quickly as possible, without waiting for one another.
  - host_pinned - uninterrupted execution per host.
  - debug - prints statements during execution and can be useful for debugging variabled and expressions without necessarily halting the playbook.
  - throttling - limit the number of simultaneous workers. 
>
> Only one strategy plugin can be used per play, but each play in a playbook can use a different one. To see the list of available strategy plugins: `ansible-doc -t strategy -l`

